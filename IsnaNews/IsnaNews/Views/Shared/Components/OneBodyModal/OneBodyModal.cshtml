@{
    ViewData["Title"] = "Home Page";
}

<!-- This is a button toggling the modal -->
<a class="uk-button uk-button-primary" href="#modal-sections" uk-toggle>Open</a>


<div id="modal-sections" class="" uk-modal dir="rtl">
    <div class="uk-modal-dialog">
        <!--Header Start-->
        <div class="uk-modal-header _MyFont" dir="rtl">
            <button class="uk-modal-close-outside" type="button" uk-close></button>

            <h2 class="mt-2 _MyFont">
                <span uk-icon="icon:plus-circle;ratio:1.5"></span>
                <span class="uk-modal-title">
                    تبلیغ جدید
                </span>
            </h2>
        </div>
        <!--Header End-->
        <!--Body Start-->
        <div class="uk-modal-body _MyFont">
            <h3 class="fw-bold _MyFont text-dark" dir="rtl">تیتر</h3>
            <!--BodyForm Start-->
            <form class="_MyFont my-2" enctype="multipart/form-data" id="BodyForm" dir="rtl">
                <textarea class="uk-textarea" name="Body" id="Body" cols="25" rows="10" placeholder="متن ...."></textarea>
            </form>
            <!--BodyForm End-->
        </div>
        <!--Body End-->
        <!--Footer Start-->
        <div class="uk-modal-footer uk-text-left _MyFont fw-bold">
            <button class="uk-button uk-button-danger uk-modal-close" type="button">خروج</button>
            <button class="uk-button uk-button-primary" type="submit" onclick="send()">ثبت</button>
        </div>
        <div class="progress uk-hidden" id="progressDiv">
            <div class="progress-bar" aria-valuemin="0" aria-valuemax="100"></div>
        </div>
        <!--Footer End-->
    </div>

</div>
<script>
    function send() {
        var MyForm = document.getElementById('MyForm1')

        if (!MyForm.checkValidity()) {
            var tmpSubmit = document.createElement('button')
            MyForm.appendChild(tmpSubmit)
            tmpSubmit.click()
            MyForm.removeChild(tmpSubmit)
        }
        else {
            document.getElementById('progressDiv').classList.remove('uk-hidden')
            var data = new FormData(MyForm1);
            $.ajax({
                url: '/Home/File',
                type: 'POST',
                data: data,
                processData: false,
                contentType: false,
                xhr: function () {
                    var xhr = new window.XMLHttpRequest();
                    xhr.upload.addEventListener("progress", function (evt) {
                        if (evt.lengthComputable) {
                            var percentComplete = evt.loaded / evt.total;
                            $('.progress-bar').css({
                                width: percentComplete * 100 + '%'
                            });
                            if (percentComplete === 1) {
                                $('.progress-bar').addClass('bg-success');
                            }
                        }
                    }, false);
                    return xhr;
                },
                success: function (data) {
                },
                error: function (data) {
                }
            });
        }
    }

</script>
<script>

    function removeFileFromFileList(index,
        input = document.getElementById('VideoUrls'),
        element = null, previewSectionId = 'VideoUrlsPreview',
        IntitDelegate = InitVideoInputPreview) {
        const dt = new DataTransfer();
        const { files } = input;

        for (let i = 0; i < files.length; i++) {
            if (i !== index) {
                const file = files[i];
                dt.items.add(file);
            }
        }
        input.files = dt.files;
        if (element != null) {
            element.remove()
            if (document.getElementById(previewSectionId).children.length == 0) {
                document.getElementById(previewSectionId).removeAttribute('style')
            }
            IntitDelegate()
        }
    }

    @*             <form method="post" enctype="multipart/form-data" id="form1">
        <input type="text" name="name" />
        </form>
        <form method="post" enctype="multipart/form-data" id="form2">
        <div class="form-group">
        <label for="file">Choose file:</label>
        <input type="file"  onchange="file.src=this.value" class="form-control-file">
        <input type="image" id="file" name="file" src="~/css/site.css" />
        </div>
        <div class="progress">
        <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
        </div>
        <button type="button" class="btn btn-primary" id="upload">Upload</button>
        </form>
        <script>

        </script> *@