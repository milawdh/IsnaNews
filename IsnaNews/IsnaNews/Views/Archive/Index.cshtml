@using DataLayer.Models
@using ServiceLayer.Utils
@{
    Layout = "HomeLayout";
}
@model List<TblNews>
@if (Model.Count > 0)
{
    <!--ArchiveNews start-->
    <section dir="rtl" class="my-2 lastNewsSec mx-auto">
        <span uk-icon="icon:file-text;ratio:1.4" class="m-2"></span>
        <h4 class="text-danger d-inline _MyFont fw-bold">آرشیو اخبار</h4>
        <div class="lastNewsSecBody" uk-scrollspy="target: > div; cls: uk-animation-slide-right; delay: 300;"
             dir="rtl">
            @foreach (var i in Model)
            {
                <!--Each Item start-->
                <div class="uk-child-width-1-1">
                    <header class="d-flex">
                        <img style="width:200px!important;" class="rounded d-inline-block" src="~/Resources/@i.MainImage.ImageUrl" alt="">
                        <span class="d-inline-block flex-fill">
                            <h6 class="w-100 d-flex">
                                <a asp-action="Index" asp-controller="Single" asp-route-id="@i.Id" class="text-break">@i.Title</a>
                            </h6>
                            <p class="_MyFont">
                                @i.Body.ToShortBody(15)
                            </p>
                        </span>
                    </header>
                    <div class="mt-2 _MyFont p-0 pt-1 d-flex justify-content-between">
                        <span class="text-danger">تاریخ انتشار:</span>
                        <span class="me-auto d-flex">
                            <span class="_hover-green _cursor-pointor _MyFont">@i.DatePosted.ToPersianDate()</span>
                            <span uk-icon="icon:calendar;ratio:1.2;"></span>
                        </span>
                    </div>
                </div>
                <!--Each Item end-->
            }
        </div>
    </section>
    <!--ArchiveNews End-->
    <!--Pagination Start-->
    <div class="d-flex justify-content-center _MyFont p-2">
        <span dir="ltr">
            <ul class="pagination pagination-lg">
                @if (ViewBag.AllPageCount == 1 || ViewBag.pageCount == 1)
                {
                    <li class="page-item"><a class="page-link _MyFont text-decoration-none disabled">قبلی</a></li>
                }
                else
                {
                    int perviousPage = ViewBag.pageCount - 1;
                    <li class="page-item"><a class="page-link _MyFont text-decoration-none" asp-route-p="@perviousPage">قبلی</a></li>
                }

                @for (int i = 0; i < ViewBag.AllPageCount * 10; i += 10)
                {
                    var index = (i / 10) + 1;
                    <li class="page-item"><a class="page-link _MyFont text-decoration-none" asp-route-p="@index">@index</a></li>
                }
                @if (ViewBag.AllPageCount == ViewBag.pageCount)
                {
                    <li class="page-item"><a class="page-link _MyFont text-decoration-none disabled">بعدی</a></li>
                }
                else
                {
                    int nextPage = ViewBag.pageCount + 1;
                    <li class="page-item"><a class="page-link _MyFont text-decoration-none" asp-route-p="@nextPage">بعدی</a></li>
                }
            </ul>
        </span>
    </div>
    <!--Pagination End-->
}
else
{
    <!--ArchiveNews start-->
    <section dir="rtl" class="my-2 lastNewsSec h-75 mx-auto">
        <span uk-icon="icon:file-text;ratio:1.4" class="m-2"></span>
        <h4 class="text-danger d-inline _MyFont fw-bold">آرشیو اخبار</h4>
        <div class="lastNewsSecBody" uk-scrollspy="target: > div; cls: uk-animation-slide-right; delay: 300;"
             dir="rtl">
            <div style="display:flex;flex-direction:row;justify-content:center;align-items:center;">
                <h3 class="_MyFont fw-bold text-secondary">خبری یافت نشد</h3>
            </div>
        </div>
    </section>
    <!--ArchiveNews End-->
}